<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reffy Infinite Canvas Demo</title>
    <script type="module" src="./index.ts"></script>
  </head>
  <style>
    html,
    body {
      margin: 0;
      padding: 0;
    }

    a, button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 8px 12px;
      border: 1px solid #d0d7de;
      border-radius: 6px;
      color: #24292f;
      text-decoration: none;
      background: #ffffff;
      cursor: pointer;
      font: 500 12px/1.3 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Noto Sans', 'Helvetica Neue', Arial;
    }

    #canvas {
      touch-action: none;
    }

    #add-image {
      position: absolute;
    }

    #control-container {
      position: absolute;
      display: flex;
      flex-direction: column;
      gap: 2rem;
      left: 2rem;
      top: 2rem;
    }

    #right-container {
      position: absolute;
      display: flex;
      flex-direction: column;
      gap: 2rem;
      right: 2rem;
      top: 2rem;
    }

    #disclaimer {
      position: absolute;
      left: 50%;
      bottom: 2rem;
      transform: translateX(-50%);
      padding: 8px 12px;
      background: #fff;
      color: #57606a;
      border: 1px solid #d0d7de;
      border-radius: 8px;
      text-align: center;
      max-width: 80vw;
      pointer-events: none;
      font: 500 12px/1.3 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Noto Sans', 'Helvetica Neue', Arial;
    }

    /* Mobile controls are hidden by default; revealed on mobile viewport */
    #mobile-container {
      position: absolute;
      display: none;
      flex-direction: column;
      gap: 1rem;
      left: 1rem;
      top: 4rem;
      background: rgba(255,255,255,1);
      padding: 8px;
      border: 1px solid #d0d7de;
      border-radius: 8px;
      
      a, button {
        border-radius: 0;
        border: none;
        background-color: rgb(242, 242, 242);;
      }
    }

    /* The hamburger button is hidden by default on desktop */
    #open-menu {
      position: absolute;
      display: none;
      left: 1rem;
      top: 1rem;
    }

    /* Desktop controls visible by default */
    #control-container { display: flex; }
    #right-container { display: flex; }

    /* Mobile viewport rules */
    @media (max-width: 768px) {
      /* Show hamburger and hide desktop side panels */
      #open-menu { display: inline-flex; }
      #control-container { display: none; }
      #right-container { display: none; }

      /* Mobile container is controlled via a class toggle */
      #mobile-container { display: none; }
      #mobile-container.is-open { display: flex; }
    }

  </style>
  <body>
    <infinite-canvas id="canvas"></infinite-canvas>
    <button id="open-menu">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
        <path fill="currentColor" d="M4 18q-.425 0-.712-.288T3 17t.288-.712T4 16h16q.425 0 .713.288T21 17t-.288.713T20 18zm0-5q-.425 0-.712-.288T3 12t.288-.712T4 11h16q.425 0 .713.288T21 12t-.288.713T20 13zm0-5q-.425 0-.712-.288T3 7t.288-.712T4 6h16q.425 0 .713.288T21 7t-.288.713T20 8z" />
      </svg>
    </button>
    <div id="mobile-container">
      <button id="mode-button-mob">Toggle Mode</button>
      <button id="zoom-in-button-mob">Zoom In</button>
      <button id="zoom-out-button-mob">Zoom Out</button>
      <button id="export-canvas-button-mob">Export Canvas</button>
      <button id="import-canvas-button-mob">Import Canvas</button>
      <button id="add-image-btn-mob">Add Image</button>
      <button id="clear-canvas-button-mob">Clear Canvas</button>
      <a
        id="github-mob"
        href="https://github.com/trash-lobster/reffy-infinite-canvas"
        target="_blank"
        rel="noopener noreferrer"
        aria-label="Open GitHub repository"
      >
        GitHub
      </a>
      <a
        id="issue-mob"
        href="https://github.com/trash-lobster/reffy-infinite-canvas/issues"
        target="_blank"
        rel="noopener noreferrer"
        aria-label="Open GitHub issues"
      >
        Raise an issue
      </a>
    </div>
    <div id="control-container">
      <button id="mode-button">Toggle Mode</button>
      <button id="zoom-in-button">Zoom In</button>
      <button id="zoom-out-button">Zoom Out</button>
      <button id="export-canvas-button">Export Canvas</button>
      <button id="import-canvas-button">Import Canvas</button>
      <input
        id="import-canvas-input"
        type="file"
        accept=".json"
        style="display: none"
      />
      <button id="add-image-btn">Add Image</button>
      <input
        id="add-image-input"
        type="file"
        accept="image/*"
        multiple
        style="display: none"
      />
      <button id="clear-canvas-button">Clear Canvas</button>
    </div>
    <div id='right-container'>
      <a
        id="github"
        href="https://github.com/trash-lobster/reffy-infinite-canvas"
        target="_blank"
        rel="noopener noreferrer"
        aria-label="Open GitHub repository"
      >
        <svg
          width="16"
          height="16"
          viewBox="0 0 16 16"
          fill="currentColor"
          aria-hidden="true"
        >
          <path
            d="M8 0C3.58 0 0 3.58 0 8a8 8 0 0 0 5.47 7.59c.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.58.82-2.14-.08-.2-.36-1.01.08-2.1 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.09.16 1.9.08 2.1.51.56.82 1.27.82 2.14 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8 8 0 0 0 16 8c0-4.42-3.58-8-8-8Z"
          />
        </svg>
        GitHub
      </a>
      <a
        id="issue"
        href="https://github.com/trash-lobster/reffy-infinite-canvas/issues"
        target="_blank"
        rel="noopener noreferrer"
        aria-label="Open GitHub issues"
      >
        Raise an issue
      </a>
    </div>
    <div id="disclaimer">
      All images added are stored locally only.
    </div>
  </body>
</html>
